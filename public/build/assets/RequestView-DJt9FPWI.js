import{c as _,o as g,r as C,f as d,t as o,m as D,T as j,a as e,u as s,_ as t,Z as T,w as r,b,j as k,h as q,k as B,d as u,F as A,D as w}from"./app-BpzujhOZ.js";import{_ as I}from"./AuthenticatedLayout-D1jPPGAS.js";import{_ as L}from"./ReqTabs-QZzZwH4u.js";import{P as N}from"./PrimaryButton-CuyPhCXz.js";import{S as y}from"./sweetalert2-z6gKu1nJ.js";import{_ as P}from"./Card-CfWD_u_-.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as E,_ as i,a as f,b as m}from"./DescriptionListItem-DYP9BLLb.js";import{r as V}from"./useRequestTypes-hiaTVpaY.js";import"./NavLink-DBAWSDrX.js";import"./GoBackNavLink-D2T8JEmi.js";const W={class:"text-gray-900 bg-white hover:bg-gray-50 border border-gray-200 focus:ring-2 focus:outline-none focus:ring-purple-500 font-medium rounded-lg text-sm px-5 p-2 text-center inline-flex items-center dark:focus:ring-gray-600 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700"},$={__name:"GenericButton",props:{href:String,text:String},setup(n){return(a,c)=>(g(),_("button",W,[C(a.$slots,"default"),d("p",null," â€â€â€Ž "+o(n.text),1)]))}},M={name:"CheckIcon"},z={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"green",class:"w-5 h-5"};function F(n,a,c,l,h,v){return g(),_("svg",z,a[0]||(a[0]=[d("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"},null,-1)]))}const O=S(M,[["render",F]]),Y={name:"XIcon"},U={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"red",class:"w-5 h-5"};function X(n,a,c,l,h,v){return g(),_("svg",U,a[0]||(a[0]=[d("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"},null,-1)]))}const G=S(Y,[["render",X]]),J={class:"py-8"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"flex justify-between items-center mb-4"},K={class:"card-header mb-2"},Q={key:0,class:"flex inline-flex gap-4"},ee={class:"mb-2 ml-1 font-semibold"},fe={__name:"RequestView",props:{request:Object},setup(n){const a=n,c=D(""),l=j({status:""}),h=()=>{y.mixin({customClass:{cancelButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",confirmButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:t("Are you sure You want to :sth this request?",{sth:c.value}),icon:"warning",showCancelButton:!0,confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),inputLabel:c.value===t("reject")?t("(Optional) Provide a remark for rejecting this request:"):"",input:c.value===t("reject")?"textarea":"",inputPlaceholder:c.value===t("reject")?t("We can't accept this leave this week as Mark and Jose will be off and we will be understaffed."):"",reverseButtons:!0}).then(p=>{p.isConfirmed&&l.put(route("requests.update",{id:a.request.id}),{preserveScroll:!0,onError:()=>{w().error(t("Error Updating Request Status"))},onSuccess:()=>{w().success(t("Request Status Updated Successfully"))}})})},v=()=>{y.mixin({customClass:{confirmButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",cancelButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:t("Are you sure?"),text:t("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonText:t("Yes, Delete!"),cancelButtonText:t("No, Cancel!"),reverseButtons:!0}).then(p=>{p.isConfirmed&&l.delete(route("requests.destroy",{id:a.request.id}),{preserveScroll:!0,onError:()=>{w().error(t("Error Deleting Request"))},onSuccess:()=>{y.fire(t("Request Removed!"),"","success")}})})};return(x,p)=>(g(),_(A,null,[e(s(T),{title:s(t)("Request Data")},null,8,["title"]),e(I,null,{tabs:r(()=>[e(L)]),default:r(()=>[d("div",J,[d("div",Z,[e(P,{class:"!mt-0"},{default:r(()=>[d("div",null,[d("div",H,[d("h1",K,o(s(t)("Request #:id Data",{id:n.request.id})),1),x.$page.props.auth.user.role==="admin"?(g(),_("div",Q,[d("form",{onSubmit:k(h,["prevent"]),class:"flex gap-4"},[n.request.status!=="Approved"?(g(),q($,{key:0,text:s(t)("Approve Request"),onClick:p[0]||(p[0]=R=>{s(l).status=1,c.value=s(t)("approve")}),class:B({"opacity-25":s(l).processing}),disabled:s(l).processing},{default:r(()=>[e(O)]),_:1},8,["text","class","disabled"])):b("",!0),n.request.status!=="Rejected"?(g(),q($,{key:1,text:s(t)("Reject Request"),onClick:p[1]||(p[1]=R=>{s(l).status=2,c.value=s(t)("reject")}),class:B({"opacity-25":s(l).processing}),disabled:s(l).processing},{default:r(()=>[e(G)]),_:1},8,["text","class","disabled"])):b("",!0)],32)])):b("",!0)]),d("h2",ee,o(s(t)("Request Info")),1),e(E,null,{default:r(()=>[e(i,{colored:""},{default:r(()=>[e(f,null,{default:r(()=>[u(o(s(t)("ID")),1)]),_:1}),e(m,null,{default:r(()=>[u(o(n.request.id),1)]),_:1})]),_:1}),e(i,{colored:""},{default:r(()=>[e(f,null,{default:r(()=>[u(o(s(t)("Created By")),1)]),_:1}),e(m,null,{default:r(()=>[u(o(n.request.employee.name),1)]),_:1})]),_:1}),e(i,null,{default:r(()=>[e(f,null,{default:r(()=>[u(o(s(t)("Request Type")),1)]),_:1}),e(m,null,{default:r(()=>[u(o(s(V)[n.request.type]),1)]),_:1})]),_:1}),e(i,null,{default:r(()=>[e(f,null,{default:r(()=>[u(o(s(t)("Request Reason")),1)]),_:1}),e(m,null,{default:r(()=>[u(o(n.request.remark),1)]),_:1})]),_:1}),e(i,{colored:""},{default:r(()=>[e(f,null,{default:r(()=>[u(o(s(t)("From Date")),1)]),_:1}),e(m,null,{default:r(()=>[u(o(n.request.start_date),1)]),_:1})]),_:1}),e(i,{colored:""},{default:r(()=>[e(f,null,{default:r(()=>[u(o(s(t)("To Date")),1)]),_:1}),e(m,null,{default:r(()=>[u(o(n.request.end_date??s(t)("N/A")),1)]),_:1})]),_:1}),e(i,null,{default:r(()=>[e(f,null,{default:r(()=>[u(o(s(t)("Submission Date")),1)]),_:1}),e(m,null,{default:r(()=>[u(o(new Date(a.request.created_at).toISOString().split("T")[0]),1)]),_:1})]),_:1}),e(i,null,{default:r(()=>[e(f,null,{default:r(()=>[u(o(s(t)("Status")),1)]),_:1}),e(m,null,{default:r(()=>[u(o(n.request.status==="Pending"?s(t)("Pending")+" â³":n.request.status==="Approved"?s(t)("Approved")+" âœ…":s(t)("Rejected")+" ðŸš«"),1)]),_:1})]),_:1}),e(i,{colored:""}),e(i,{colored:""},{default:r(()=>[e(f),e(m)]),_:1})]),_:1}),x.$page.props.auth.user.role==="admin"?(g(),_("form",{key:0,onSubmit:k(v,["prevent"]),class:"flex justify-end"},[e(N,{class:"bg-red-600 hover:bg-red-700 ml-4 mt-4 focus:bg-red-500 active:bg-red-900"},{default:r(()=>[u(o(s(t)("Delete Request")),1)]),_:1})],32)):b("",!0)])]),_:1})])])]),_:1})],64))}};export{fe as default};
